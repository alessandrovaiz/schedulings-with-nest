<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>App</title>

    <link href='https://cdn.jsdelivr.net/npm/fullcalendar-scheduler@5.11.3/main.css' rel='stylesheet' />
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar-scheduler@5.11.3/main.js'></script>

    <script>
      
      const appointments = '<%- JSON.stringify(schedulings) %>'
      const parsedAppointments = JSON.parse(appointments)
      const events = parsedAppointments.map((e) => {
        if(!e.isCanceled) {
          return {
            title: e.activity,
            start: new Date(e.startDate),
            end: new Date(e.endDate),
            allDay: false
          }
        }
      })

      document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
          initialView: 'listWeek',
          events
        });
        calendar.render();
      });

    </script>
  </head>

<body>
  <div id="calendar"></div>
 </body>
</html>
